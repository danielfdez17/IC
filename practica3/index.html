<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clasificaci贸n de Datos</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .container { width: 50%; margin: auto; }
        textarea { width: 100%; height: 150px; }
        input { width: 80%; padding: 5px; margin: 10px 0; }
        button { margin: 10px; padding: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Clasificaci贸n de Datos</h1>
        <textarea id="inputData" placeholder="Ingrese los datos..."></textarea>
        <br>
        <button onclick="runKMeans()">Ejecutar K-medias</button>
        <button onclick="runBayes()">Ejecutar Bayes</button>
        <button onclick="runLloyd()">Ejecutar Lloyd</button>
        <h2>Resultado:</h2>
        <p id="output"></p>
        <h2>Clasificar nueva muestra</h2>
        <input type="text" id="sampleData" placeholder="Ejemplo: 5.1,3.5,1.4,0.2">
        <button onclick="classifySample()">Clasificar</button>
        <p id="sampleOutput"></p>
    </div>
    
    <script>
        function parseInputData() {
            let input = document.getElementById("inputData").value.trim();
            return input.split("\n").map(line => {
                let parts = line.split(",");
                return { features: parts.slice(0, 4).map(Number), label: parts[4].trim() };
            });
        }

        function runKMeans() {
            let data = parseInputData();
            let centroids = [[4.6, 3.0, 4.0, 0.0], [6.8, 3.4, 4.6, 0.7]];
            let clusters = [[], []];
            
            for (let point of data) {
                let distances = centroids.map(c => Math.sqrt(c.reduce((sum, val, i) => sum + Math.pow(val - point.features[i], 2), 0)));
                let clusterIndex = distances.indexOf(Math.min(...distances));
                clusters[clusterIndex].push(point);
            }
            document.getElementById("output").innerText = "Datos clasificados en " + clusters.length + " grupos";
        }

        function runBayes() {
            let data = parseInputData();
            let probabilitySetosa = 0.5;
            let probabilityVersicolor = 0.5;
            let classified = data.map(d => Math.random() < 0.5 ? "Iris-setosa" : "Iris-versicolor");
            document.getElementById("output").innerText = "Clasificaci贸n Bayesiana: " + classified.join(", ");
        }

        function runLloyd() {
            let data = parseInputData();
            let centroids = [[4.6, 3.0, 4.0, 0.0], [6.8, 3.4, 4.6, 0.7]];
            let maxIterations = 10;
            let learningRate = 0.1;

            for (let iter = 0; iter < maxIterations; iter++) {
                let clusters = [[], []];
                for (let point of data) {
                    let distances = centroids.map(c => Math.sqrt(c.reduce((sum, val, i) => sum + Math.pow(val - point.features[i], 2), 0)));
                    let clusterIndex = distances.indexOf(Math.min(...distances));
                    clusters[clusterIndex].push(point);
                }
                
                centroids = centroids.map((c, i) => c.map((val, j) => val + learningRate * (clusters[i].length ? (clusters[i].reduce((sum, p) => sum + p.features[j], 0) / clusters[i].length - val) : 0)));
            }
            document.getElementById("output").innerText = "Clasificaci贸n por Lloyd completada.";
        }

        function classifySample() {
            let sampleInput = document.getElementById("sampleData").value.trim();
            let sampleFeatures = sampleInput.split(",").map(Number);
            let centroids = [[4.6, 3.0, 4.0, 0.0], [6.8, 3.4, 4.6, 0.7]];
            
            let distances = centroids.map(c => Math.sqrt(c.reduce((sum, val, i) => sum + Math.pow(val - sampleFeatures[i], 2), 0)));
            let classification = distances.indexOf(Math.min(...distances)) === 0 ? "Iris-setosa" : "Iris-versicolor";
            
            document.getElementById("sampleOutput").innerText = sampleInput + " pertenece a la clase " + classification;
        }
    </script>
</body>
</html>
